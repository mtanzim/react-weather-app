(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,n){},15:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(2),s=n.n(i),o=(n(13),n(3)),c=n(4),l=n(6),u=n(5),m=n(7),d=(n(15),function(e){var t=e.title;return r.a.createElement("div",{className:""},r.a.createElement("h1",null,t))}),f=function(e){e.id;var t=e.title,n=e.data,a=-1;return r.a.createElement("div",{className:"col-4"},r.a.createElement("div",{className:"card mb-4 mt-4"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},t),r.a.createElement("ul",null,Boolean("object"===typeof n)?Object.keys(n).map(function(e){return a++,"object"!==typeof n[e]?r.a.createElement("li",{key:a,id:a},"".concat(e,": ").concat(n[e])):(console.error("Please update the parser for:"),console.error(JSON.stringify(n[e])),r.a.createElement("li",null,"Error on ",e))}):r.a.createElement("li",null,n)))))},h=function(e){var t=e.curState,n=e.revertAction,a=e.data;return r.a.createElement("ul",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-3"},r.a.createElement("button",{onClick:n(t),className:"btn-primary"},t)),r.a.createElement("div",{className:"col-9"},JSON.stringify(a))))},v={coord:{lon:13.39,lat:52.52},weather:[{id:800,main:"Clear",description:"clear sky",icon:"01d"}],base:"stations",main:{temp:285.64,pressure:1019,humidity:43,temp_min:285.15,temp_max:286.15},visibility:1e4,wind:{speed:3.1,deg:200},clouds:{all:0},dt:1540995600,sys:{type:1,id:4892,message:.003,country:"DE",sunrise:1540965701,sunset:1541000253},id:2950159,name:"Berlin",cod:200},y={coord:{lon:13.39,lat:52.52},weather:[{id:"ABC",main:"Clear",description:"clear sky",icon:"01d"}],base:"stations",main:{temp:285.64,pressure:1019,humidity:43,temp_min:285.15,temp_max:286.15},visibility:1e4,wind:{speed:3.1,deg:200},clouds:{all:0},dt:1540995600,sys:{type:1,id:4892,message:.003,country:"DE",sunrise:1540965701,sunset:1541000253},id:2950159,name:"Berlin",cod:200},p=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).sanitizeDataFunc=function(e,t){var a=Object.keys(e).filter(function(e){return n.requiredDataFilters.includes(e)}).reduce(function(t,n){return t[n]="weather"===n?e[n][0]||"":e[n],t},{});return a.timestamp=t,a},n.refreshOffline=function(){return new Promise(function(e,t){setTimeout(function(){var t=Math.floor(6*Math.random())+1;e(t<3?v:y)},n.offlineDelay)})},n.refreshWeather=function(){fetch("http://api.openweathermap.org/data/2.5/weather?q=".concat(n.city,"&APPID=").concat(n.API_ID)).then(function(e){return e.json()}).then(function(e){return e.message?(n.setState({isOffline:!0,errorMessage:e.message}),n.refreshOffline()):(n.setState({isOffline:!1,errorMessage:""}),e)}).then(function(e){var t=String(+new Date),a=n.sanitizeDataFunc(e,t);n.stateHistory[t]=a,n.setState({sanitizedData:a,loading:!1}),n.restartIntervals()}).catch(function(e){return console.log(e.message)})},n.revertState=function(e){return function(){n.setState({sanitizedData:n.stateHistory[e]}),n.restartIntervals()}},n.cardIdCount=-1,n.stateHistory={},n.refreshTiimer=3e5,n.offlineDelay=50,n.state={loading:!0,countDown:n.refreshTiimer,isOffline:!1,errorMessage:""},n.interval=null,n.countDownInterval=null,n.city="Berlin",n.API_ID="82f13ccba8452fb77eab61ee10ce5d53",n.requiredDataFilters=["main","wind","weather","coord","sys"],n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.interval=setInterval(function(){return e.refreshWeather()},this.refreshTiimer),this.countDownInterval=setInterval(function(){return e.setState(function(e,t){return e.countDown-=1e3})},1e3),this.refreshWeather()}},{key:"restartIntervals",value:function(){var e=this;clearInterval(this.interval),clearInterval(this.countDownInterval),this.interval=setInterval(function(){return e.refreshWeather()},this.refreshTiimer),this.countDownInterval=setInterval(function(){return e.setState(function(e,t){return e.countDown-=1e3})},1e3),this.setState({countDown:this.refreshTiimer})}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval),clearInterval(this.countDownInterval)}},{key:"render",value:function(){var e=this;return this.state.loading?r.a.createElement("p",null,"'Loading'"):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"jumbotron"},r.a.createElement(d,{title:this.city}),this.state.isOffline?r.a.createElement("p",null,"Offline! ",this.state.errorMessage):r.a.createElement("p",null,"LIVE"),r.a.createElement("button",{className:"btn-danger",onClick:this.refreshWeather},"Refresh"),r.a.createElement("p",null,"Refreshing in ",Math.floor(this.state.countDown/1e3)," seconds")),r.a.createElement("div",{className:"row mt-4 mb-4"},r.a.createElement("h5",null,"History")),r.a.createElement("div",{className:"row"},this.stateHistory&&Object.keys(this.stateHistory).map(function(t){return r.a.createElement(h,{key:t,revertAction:e.revertState,curState:t,data:e.stateHistory[t]})})),r.a.createElement("div",{className:"row"},r.a.createElement("h5",null,"Conditions for ",this.state.sanitizedData.timestamp)),r.a.createElement("div",{className:"row"},Object.keys(this.state.sanitizedData).map(function(t){return e.cardIdCount++,r.a.createElement(f,{id:e.cardIdCount,key:e.cardIdCount,title:t,data:e.state.sanitizedData[t]})})))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(p,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},8:function(e,t,n){e.exports=n(17)}},[[8,2,1]]]);
//# sourceMappingURL=main.3d8fdb44.chunk.js.map